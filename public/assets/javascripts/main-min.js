var App=App||{};App.Authentication=App.Authentication||{};App.Authentication.Facebook=function(){"use strict";function n(){$.ajaxSetup({cache:!0});$.getScript("//connect.facebook.net/da_DK/all.js",function(){FB.init({appId:"839189926131224",xfbml:!0,version:"v2.2"})})}function r(e){var t=e||i;FB.getLoginStatus(t)}function i(e){if(e.status=="connected"){$(t.facebookID).val(e.authResponse.userID);$(t.accessToken).val(e.authResponse.accessToken)}else FB.login(function(e){i(e)},{scope:"email, user_birthday, user_likes, read_stream"})}var e={},t={facebookID:".js-facebook-id",accessToken:".js-accesstoken"};return{initialize:n,getLoginStatus:r}}();var App=App||{};App.Parse=function(){"use strict";function e(){$.getScript("//www.parsecdn.com/js/parse-1.3.2.min.js",function(){Parse.initialize("CJzUVNSgyd8nZZ1OpT7DQJAaE1yV7SfMxDi2WG2d","qrlaDjb5NiCJhPlgytvnGzNafI6vOBN6xGUNO37U")})}function t(e){var t={status:e.status.toString()};Parse.Analytics.track("login error",t)}return{initialize:e,loginError:t}}();var App=App||{};App.SignUp=function(){"use strict";function n(){r();i()}function r(){e.$submit=$(".js-user-create-btn");e.$form=$(".js-user-create-form")}function i(){e.$submit.on("click",s)}function s(){event.preventDefault();var e=$(this);e.hasClass(t.facebookLoginBtn)?$.when(App.Authentication.Facebook.getLoginStatus()).done(function(){o(e)}):o(e)}function o(n){var n=n||$(this);n.hasClass(t.facebookLoginBtn)&&FB.api("/me",{fields:"name"},function(t){$("input[name='name']",e.$form).val(t.name);$("input[name='username']",e.$form).val(t.id)});var r=e.$form.serializeArray();u(r)}function u(t){$.ajax({type:"POST",url:e.$form.attr("action"),data:t}).done(function(e){var t=$.parseJSON(e);if(t.status=="pending"||t.status=="active")_loginSuccess();else if(t.status=="incorrect")alert("Der findes ingen bruger med disse oplysninger.");else{App.Parse.loginError(t);alert("Der skete en fejl, supporten er underrettet.")}})}var e={},t={facebookLoginBtn:"user-create__btn--facebook"};return{initialize:n}}();var App=App||{};App.Login=function(){"use strict";function n(){r();i()}function r(){e.$submit=$(".js-login-btn");e.$form=$(".js-login-form")}function i(){e.$submit.on("click",s)}function s(){event.preventDefault();var e=$(this);e.hasClass(t.facebookLoginBtn)?$.when(App.Authentication.Facebook.getLoginStatus()).done(o):o(e)}function o(t){var t=t||$(this),n=e.$form.serializeArray();u(n)}function u(t){$.ajax({type:"POST",url:e.$form.attr("action"),data:t}).done(function(e){var t=$.parseJSON(e);if(t.status=="pending"||t.status=="active")a();else if(t.status=="incorrect")alert("Der findes ingen bruger med disse oplysninger.");else{App.Parse.loginError(t);alert("Der skete en fejl, supporten er underrettet.")}})}function a(){e.$form.html("Du er logget ind som: "+data.Name)}var e={},t={facebookLoginBtn:"facebook-login-btn"};return{initialize:n}}();var App=App||{};App.SignUp=function(){"use strict";function n(){r();i()}function r(){e.$submit=$(".js-create-btn");e.$form=$(".js-match-create-form")}function i(){e.$signupSubmit.on("click",s)}function s(){event.preventDefault()}var e={},t={facebookLoginBtn:"facebook-create-btn"};return{initialize:n}}();var App=App||{};$(document).ready(function(){App.Authentication.Facebook.initialize();App.Parse.initialize();App.Login.initialize();App.SignUp.initialize()});